<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapitre 14 Animer ses graphiques ggplot avec gganimate | Valoriser ses données avec R</title>
  <meta name="description" content="Valorisation des données sous R (module 5)" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapitre 14 Animer ses graphiques ggplot avec gganimate | Valoriser ses données avec R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Valorisation des données sous R (module 5)" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapitre 14 Animer ses graphiques ggplot avec gganimate | Valoriser ses données avec R" />
  
  <meta name="twitter:description" content="Valorisation des données sous R (module 5)" />
  

<meta name="author" content="Maël Theulière &amp; Murielle Lethrosne" />


<meta name="date" content="2021-12-06" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="créer-des-cartes-avec-ggplot2.html"/>
<link rel="next" href="créer-des-graphiques-et-cartes-pour-le-web.html"/>
<script src="libs/header-attrs-2.8/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/d3-5.7.0/d3.min.js"></script>
<script src="libs/d3-lasso-0.0.5/d3-lasso.min.js"></script>
<link href="libs/ggiraphjs-0.3.0/ggiraphjs.min.css" rel="stylesheet" />
<script src="libs/ggiraphjs-0.3.0/ggiraphjs.min.js"></script>
<script src="libs/girafe-binding-0.7.8/girafe.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><p style="text-align:center;"><img src="https://mtes-mct.github.io/parcours-r/assets/images/logo_marianne_fond_blanc.png" style="width:100px;"/></p></li>
<li><a href="./">Valoriser ses données avec R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="une-typologie-des-représentations-graphiques.html"><a href="une-typologie-des-représentations-graphiques.html"><i class="fa fa-check"></i><b>2</b> Une typologie des représentations graphiques</a></li>
<li class="chapter" data-level="3" data-path="bien-commencer.html"><a href="bien-commencer.html"><i class="fa fa-check"></i><b>3</b> Bien commencer</a>
<ul>
<li class="chapter" data-level="3.1" data-path="bien-commencer.html"><a href="bien-commencer.html#créer-un-projet-sous-rstudio-pour-vous-permettre-de-recencer-vos-travaux."><i class="fa fa-check"></i><b>3.1</b> Créer un projet sous Rstudio pour vous permettre de recencer vos travaux.</a></li>
<li class="chapter" data-level="3.2" data-path="bien-commencer.html"><a href="bien-commencer.html#intégrer-vos-données"><i class="fa fa-check"></i><b>3.2</b> Intégrer vos données</a></li>
<li class="chapter" data-level="3.3" data-path="bien-commencer.html"><a href="bien-commencer.html#créer-votre-arborescence-de-projet"><i class="fa fa-check"></i><b>3.3</b> Créer votre arborescence de projet</a></li>
<li class="chapter" data-level="3.4" data-path="bien-commencer.html"><a href="bien-commencer.html#utilisation-du-package-savoirfr"><i class="fa fa-check"></i><b>3.4</b> Utilisation du package savoirfR</a></li>
<li class="chapter" data-level="3.5" data-path="bien-commencer.html"><a href="bien-commencer.html#activer-les-packages-nécessaires"><i class="fa fa-check"></i><b>3.5</b> Activer les packages nécessaires</a></li>
<li class="chapter" data-level="3.6" data-path="bien-commencer.html"><a href="bien-commencer.html#bien-structurer-ses-projets-data"><i class="fa fa-check"></i><b>3.6</b> Bien structurer ses projets data</a></li>
</ul></li>
<li class="part"><span><b>I Créer des graphiques sous R avec ggplot 2</b></span></li>
<li class="chapter" data-level="4" data-path="package-ggplot2.html"><a href="package-ggplot2.html"><i class="fa fa-check"></i><b>4</b> Package ggplot2</a>
<ul>
<li class="chapter" data-level="4.1" data-path="package-ggplot2.html"><a href="package-ggplot2.html#présentation-de-ggplot2"><i class="fa fa-check"></i><b>4.1</b> Présentation de ggplot2</a></li>
<li class="chapter" data-level="4.2" data-path="package-ggplot2.html"><a href="package-ggplot2.html#le-tidyverse"><i class="fa fa-check"></i><b>4.2</b> Le Tidyverse</a></li>
<li class="chapter" data-level="4.3" data-path="package-ggplot2.html"><a href="package-ggplot2.html#les-concepts-clefs"><i class="fa fa-check"></i><b>4.3</b> Les concepts clefs</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="le-mapping.html"><a href="le-mapping.html"><i class="fa fa-check"></i><b>5</b> Le mapping</a>
<ul>
<li class="chapter" data-level="5.1" data-path="le-mapping.html"><a href="le-mapping.html#les-paramètres-du-mapping"><i class="fa fa-check"></i><b>5.1</b> Les paramètres du mapping</a></li>
<li class="chapter" data-level="5.2" data-path="le-mapping.html"><a href="le-mapping.html#les-autres-paramètres"><i class="fa fa-check"></i><b>5.2</b> Les “autres” paramètres</a></li>
<li class="chapter" data-level="5.3" data-path="le-mapping.html"><a href="le-mapping.html#exercice-1"><i class="fa fa-check"></i><b>5.3</b> Exercice 1</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="les-formes-géométriques.html"><a href="les-formes-géométriques.html"><i class="fa fa-check"></i><b>6</b> Les formes géométriques</a></li>
<li class="chapter" data-level="7" data-path="lhabillage-simple.html"><a href="lhabillage-simple.html"><i class="fa fa-check"></i><b>7</b> L’habillage simple</a>
<ul>
<li class="chapter" data-level="7.1" data-path="lhabillage-simple.html"><a href="lhabillage-simple.html#titre-et-libellé-des-axes"><i class="fa fa-check"></i><b>7.1</b> Titre et libellé des axes</a></li>
<li class="chapter" data-level="7.2" data-path="lhabillage-simple.html"><a href="lhabillage-simple.html#légende"><i class="fa fa-check"></i><b>7.2</b> Légende</a></li>
<li class="chapter" data-level="7.3" data-path="lhabillage-simple.html"><a href="lhabillage-simple.html#annotations"><i class="fa fa-check"></i><b>7.3</b> Annotations</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="les-thèmes.html"><a href="les-thèmes.html"><i class="fa fa-check"></i><b>8</b> Les thèmes</a>
<ul>
<li class="chapter" data-level="8.1" data-path="les-thèmes.html"><a href="les-thèmes.html#les-fonctions-element"><i class="fa fa-check"></i><b>8.1</b> Les fonctions “element”</a></li>
<li class="chapter" data-level="8.2" data-path="les-thèmes.html"><a href="les-thèmes.html#les-composantes"><i class="fa fa-check"></i><b>8.2</b> Les composantes</a></li>
<li class="chapter" data-level="8.3" data-path="les-thèmes.html"><a href="les-thèmes.html#quelques-exemples"><i class="fa fa-check"></i><b>8.3</b> Quelques exemples</a></li>
<li class="chapter" data-level="8.4" data-path="les-thèmes.html"><a href="les-thèmes.html#modifier-le-thème-par-défaut"><i class="fa fa-check"></i><b>8.4</b> Modifier le thème par défaut</a></li>
<li class="chapter" data-level="8.5" data-path="les-thèmes.html"><a href="les-thèmes.html#créer-son-propre-thème"><i class="fa fa-check"></i><b>8.5</b> Créer son propre thème</a></li>
<li class="chapter" data-level="8.6" data-path="les-thèmes.html"><a href="les-thèmes.html#thème---package-gouvdown"><i class="fa fa-check"></i><b>8.6</b> Thème - package gouvdown</a></li>
<li class="chapter" data-level="8.7" data-path="les-thèmes.html"><a href="les-thèmes.html#exercice-2"><i class="fa fa-check"></i><b>8.7</b> Exercice 2</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="les-scales.html"><a href="les-scales.html"><i class="fa fa-check"></i><b>9</b> Les scales</a>
<ul>
<li class="chapter" data-level="9.1" data-path="les-scales.html"><a href="les-scales.html#les-fonctions"><i class="fa fa-check"></i><b>9.1</b> Les fonctions</a></li>
<li class="chapter" data-level="9.2" data-path="les-scales.html"><a href="les-scales.html#scales---package-gouvdown"><i class="fa fa-check"></i><b>9.2</b> Scales - package gouvdown</a></li>
<li class="chapter" data-level="9.3" data-path="les-scales.html"><a href="les-scales.html#formatage-spécifique"><i class="fa fa-check"></i><b>9.3</b> Formatage spécifique</a></li>
<li class="chapter" data-level="9.4" data-path="les-scales.html"><a href="les-scales.html#exercice-3"><i class="fa fa-check"></i><b>9.4</b> Exercice 3</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="la-mise-en-page-de-plusieurs-graphiques.html"><a href="la-mise-en-page-de-plusieurs-graphiques.html"><i class="fa fa-check"></i><b>10</b> La mise en page de plusieurs graphiques</a></li>
<li class="chapter" data-level="11" data-path="les-facettes.html"><a href="les-facettes.html"><i class="fa fa-check"></i><b>11</b> Les facettes</a>
<ul>
<li class="chapter" data-level="11.1" data-path="les-facettes.html"><a href="les-facettes.html#exercice-4"><i class="fa fa-check"></i><b>11.1</b> Exercice 4</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="exporter-un-graphique.html"><a href="exporter-un-graphique.html"><i class="fa fa-check"></i><b>12</b> Exporter un graphique</a></li>
<li class="part"><span><b>II Créer des cartes sous R</b></span></li>
<li class="chapter" data-level="13" data-path="créer-des-cartes-avec-ggplot2.html"><a href="créer-des-cartes-avec-ggplot2.html"><i class="fa fa-check"></i><b>13</b> Créer des cartes avec ggplot2</a>
<ul>
<li class="chapter" data-level="13.1" data-path="créer-des-cartes-avec-ggplot2.html"><a href="créer-des-cartes-avec-ggplot2.html#les-cartes-choroplèthes"><i class="fa fa-check"></i><b>13.1</b> Les cartes choroplèthes</a></li>
<li class="chapter" data-level="13.2" data-path="créer-des-cartes-avec-ggplot2.html"><a href="créer-des-cartes-avec-ggplot2.html#les-cartes-à-ronds-proportionnels"><i class="fa fa-check"></i><b>13.2</b> Les cartes à ronds proportionnels</a></li>
<li class="chapter" data-level="13.3" data-path="créer-des-cartes-avec-ggplot2.html"><a href="créer-des-cartes-avec-ggplot2.html#les-facettes-1"><i class="fa fa-check"></i><b>13.3</b> Les facettes</a></li>
<li class="chapter" data-level="13.4" data-path="créer-des-cartes-avec-ggplot2.html"><a href="créer-des-cartes-avec-ggplot2.html#ajouter-une-barre-déchelle-et-la-flèche-du-nord"><i class="fa fa-check"></i><b>13.4</b> Ajouter une barre d’échelle et la flèche du nord</a></li>
<li class="chapter" data-level="13.5" data-path="créer-des-cartes-avec-ggplot2.html"><a href="créer-des-cartes-avec-ggplot2.html#ajouter-des-étiquettes-et-du-texte"><i class="fa fa-check"></i><b>13.5</b> Ajouter des étiquettes et du texte</a></li>
<li class="chapter" data-level="13.6" data-path="créer-des-cartes-avec-ggplot2.html"><a href="créer-des-cartes-avec-ggplot2.html#exercice-5"><i class="fa fa-check"></i><b>13.6</b> Exercice 5</a></li>
</ul></li>
<li class="part"><span><b>III Graphiques animés</b></span></li>
<li class="chapter" data-level="14" data-path="animer-ses-graphiques-ggplot-avec-gganimate.html"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html"><i class="fa fa-check"></i><b>14</b> Animer ses graphiques ggplot avec gganimate</a>
<ul>
<li class="chapter" data-level="14.1" data-path="animer-ses-graphiques-ggplot-avec-gganimate.html"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#produire-une-animation"><i class="fa fa-check"></i><b>14.1</b> Produire une animation</a></li>
<li class="chapter" data-level="14.2" data-path="animer-ses-graphiques-ggplot-avec-gganimate.html"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#paramétrer-lanimation"><i class="fa fa-check"></i><b>14.2</b> Paramétrer l’animation</a></li>
<li class="chapter" data-level="14.3" data-path="animer-ses-graphiques-ggplot-avec-gganimate.html"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#exporter-une-animation"><i class="fa fa-check"></i><b>14.3</b> Exporter une animation</a></li>
<li class="chapter" data-level="14.4" data-path="animer-ses-graphiques-ggplot-avec-gganimate.html"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#exercice-6"><i class="fa fa-check"></i><b>14.4</b> Exercice 6</a></li>
</ul></li>
<li class="part"><span><b>IV Dataviz pour le web</b></span></li>
<li class="chapter" data-level="15" data-path="créer-des-graphiques-et-cartes-pour-le-web.html"><a href="créer-des-graphiques-et-cartes-pour-le-web.html"><i class="fa fa-check"></i><b>15</b> Créer des graphiques et cartes pour le web</a>
<ul>
<li class="chapter" data-level="15.1" data-path="créer-des-graphiques-et-cartes-pour-le-web.html"><a href="créer-des-graphiques-et-cartes-pour-le-web.html#ggiraph"><i class="fa fa-check"></i><b>15.1</b> ggiraph</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="créer-des-graphiques-et-cartes-pour-le-web.html"><a href="créer-des-graphiques-et-cartes-pour-le-web.html#exemple-de-graphique-avec-infobulle"><i class="fa fa-check"></i><b>15.1.1</b> Exemple de graphique avec infobulle</a></li>
<li class="chapter" data-level="15.1.2" data-path="créer-des-graphiques-et-cartes-pour-le-web.html"><a href="créer-des-graphiques-et-cartes-pour-le-web.html#les-facettes-2"><i class="fa fa-check"></i><b>15.1.2</b> Les facettes</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="créer-des-graphiques-et-cartes-pour-le-web.html"><a href="créer-des-graphiques-et-cartes-pour-le-web.html#les-cartes-leaflet"><i class="fa fa-check"></i><b>15.2</b> Les cartes Leaflet</a></li>
<li class="chapter" data-level="15.3" data-path="créer-des-graphiques-et-cartes-pour-le-web.html"><a href="créer-des-graphiques-et-cartes-pour-le-web.html#exporter-une-sortie-html"><i class="fa fa-check"></i><b>15.3</b> Exporter une sortie html</a></li>
<li class="chapter" data-level="15.4" data-path="créer-des-graphiques-et-cartes-pour-le-web.html"><a href="créer-des-graphiques-et-cartes-pour-le-web.html#exercice-7"><i class="fa fa-check"></i><b>15.4</b> Exercice 7</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="créer-des-tableaux-avec-kable-et-kable-extra.html"><a href="créer-des-tableaux-avec-kable-et-kable-extra.html"><i class="fa fa-check"></i><b>16</b> Créer des tableaux avec kable et kable extra</a>
<ul>
<li class="chapter" data-level="16.1" data-path="créer-des-tableaux-avec-kable-et-kable-extra.html"><a href="créer-des-tableaux-avec-kable-et-kable-extra.html#sauvegarde"><i class="fa fa-check"></i><b>16.1</b> Sauvegarde</a></li>
<li class="chapter" data-level="16.2" data-path="créer-des-tableaux-avec-kable-et-kable-extra.html"><a href="créer-des-tableaux-avec-kable-et-kable-extra.html#exercice-8"><i class="fa fa-check"></i><b>16.2</b> Exercice 8</a></li>
</ul></li>
<li class="part"><span><b>V Ressources et correction</b></span></li>
<li class="chapter" data-level="17" data-path="ressources.html"><a href="ressources.html"><i class="fa fa-check"></i><b>17</b> Ressources</a>
<ul>
<li class="chapter" data-level="17.1" data-path="ressources.html"><a href="ressources.html#dataviz"><i class="fa fa-check"></i><b>17.1</b> dataviz</a></li>
<li class="chapter" data-level="17.2" data-path="ressources.html"><a href="ressources.html#ggplot2"><i class="fa fa-check"></i><b>17.2</b> ggplot2</a></li>
<li class="chapter" data-level="17.3" data-path="ressources.html"><a href="ressources.html#tmap"><i class="fa fa-check"></i><b>17.3</b> tmap</a>
<ul>
<li class="chapter" data-level="17.3.1" data-path="ressources.html"><a href="ressources.html#cartographie-avec-tmap"><i class="fa fa-check"></i><b>17.3.1</b> Cartographie avec tmap</a></li>
</ul></li>
<li class="chapter" data-level="17.4" data-path="ressources.html"><a href="ressources.html#ggiraph-1"><i class="fa fa-check"></i><b>17.4</b> ggiraph</a></li>
<li class="chapter" data-level="17.5" data-path="ressources.html"><a href="ressources.html#apexcharter"><i class="fa fa-check"></i><b>17.5</b> apexcharter</a></li>
<li class="chapter" data-level="17.6" data-path="ressources.html"><a href="ressources.html#kable-et-kableextra"><i class="fa fa-check"></i><b>17.6</b> kable et kableExtra</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="exercices-et-corrections.html"><a href="exercices-et-corrections.html"><i class="fa fa-check"></i><b>18</b> Exercices et corrections</a>
<ul>
<li class="chapter" data-level="18.1" data-path="exercices-et-corrections.html"><a href="exercices-et-corrections.html#exercice-1-1"><i class="fa fa-check"></i><b>18.1</b> Exercice 1</a></li>
<li class="chapter" data-level="18.2" data-path="exercices-et-corrections.html"><a href="exercices-et-corrections.html#exercice-2-1"><i class="fa fa-check"></i><b>18.2</b> Exercice 2</a></li>
<li class="chapter" data-level="18.3" data-path="exercices-et-corrections.html"><a href="exercices-et-corrections.html#exercice-3-1"><i class="fa fa-check"></i><b>18.3</b> Exercice 3</a></li>
<li class="chapter" data-level="18.4" data-path="exercices-et-corrections.html"><a href="exercices-et-corrections.html#exercice-4-1"><i class="fa fa-check"></i><b>18.4</b> Exercice 4</a></li>
<li class="chapter" data-level="18.5" data-path="exercices-et-corrections.html"><a href="exercices-et-corrections.html#exercice-5-1"><i class="fa fa-check"></i><b>18.5</b> Exercice 5</a></li>
<li class="chapter" data-level="18.6" data-path="exercices-et-corrections.html"><a href="exercices-et-corrections.html#exercice-6-1"><i class="fa fa-check"></i><b>18.6</b> Exercice 6</a></li>
<li class="chapter" data-level="18.7" data-path="exercices-et-corrections.html"><a href="exercices-et-corrections.html#exercice-7-1"><i class="fa fa-check"></i><b>18.7</b> Exercice 7</a></li>
<li class="chapter" data-level="18.8" data-path="exercices-et-corrections.html"><a href="exercices-et-corrections.html#exercice-8-1"><i class="fa fa-check"></i><b>18.8</b> Exercice 8</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://mtes-mct.github.io/parcours-r/">Liste des formations R</a></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Valoriser ses données avec R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="animer-ses-graphiques-ggplot-avec-gganimate" class="section level1" number="14">
<h1><span class="header-section-number">Chapitre 14</span> Animer ses graphiques ggplot avec gganimate</h1>
<p>Le package <a href="https://gganimate.com/">gganimate</a> permet d’enrichir ggplot avec des fonctionnalités d’animation.</p>
<div id="produire-une-animation" class="section level2" number="14.1">
<h2><span class="header-section-number">14.1</span> Produire une animation</h2>
<p>Nous allons voir comment animer notre premier graphique sur la répartition des pays en fonction du taux de mortalité et du PIB, en regardant comment celui ci évolue avec les années.</p>
<p>Pour cela, nous partons des même données mais définies pour l’ensemble des années depuis 1990.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> ODD_graphique_anime) <span class="sc">+</span> </span>
<span id="cb48-2"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">log</span>(Gross_Domestic_Product_GDP),</span>
<span id="cb48-3"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb48-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">y=</span><span class="fu">log</span>(Maternal_mortality_ratio),</span>
<span id="cb48-4"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb48-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">color=</span>Continent))<span class="sc">+</span></span>
<span id="cb48-5"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb48-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Mortalité maternelle en fonction du PIB par habitant&quot;</span>,</span>
<span id="cb48-6"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb48-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span><span class="st">&quot;En 2015&quot;</span>,</span>
<span id="cb48-7"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb48-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;PIB&quot;</span>,</span>
<span id="cb48-8"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb48-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;Taux de mortalité de la mère </span><span class="sc">\n</span><span class="st">(pour 100 000 naissances)&quot;</span>,</span>
<span id="cb48-9"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb48-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption=</span><span class="st">&quot;Source : ODD / ONU</span><span class="sc">\n</span><span class="st"> échelle logarithmique&quot;</span>)</span></code></pre></div>
<p><img src="Valorisation-des-donn%C3%A9es_files/figure-html/gganim_1-1.png" width="672" /></p>
<p>Le graphique précédent est bien sûr illisible, un même pays voit ces données affichées pour toutes les années.
Nous allons utiliser la fonction <strong><em>transition_states()</em></strong> du package <code>gganimate</code> pour lui définir l’année comme la frame de notre graphique animé.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb49-1" aria-hidden="true" tabindex="-1"></a>anim <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> ODD_graphique_anime) <span class="sc">+</span> </span>
<span id="cb49-2"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">log</span>(Gross_Domestic_Product_GDP),</span>
<span id="cb49-3"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb49-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">y=</span><span class="fu">log</span>(Maternal_mortality_ratio),</span>
<span id="cb49-4"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb49-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">color=</span>Continent)) <span class="sc">+</span></span>
<span id="cb49-5"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb49-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Mortalité maternelle en fonction du PIB par habitant&quot;</span>,</span>
<span id="cb49-6"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb49-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span><span class="st">&quot;En {closest_state}&quot;</span>,</span>
<span id="cb49-7"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb49-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;PIB&quot;</span>,</span>
<span id="cb49-8"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb49-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;Taux de mortalité de la mère </span><span class="sc">\n</span><span class="st">(pour 100 000 naissances)&quot;</span>,</span>
<span id="cb49-9"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb49-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption=</span><span class="st">&quot;Source : ODD / ONU</span><span class="sc">\n</span><span class="st"> échelle logarithmique&quot;</span>)<span class="sc">+</span></span>
<span id="cb49-10"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb49-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transition_states</span>(<span class="at">states=</span>Year,</span>
<span id="cb49-11"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb49-11" aria-hidden="true" tabindex="-1"></a>                    <span class="at">transition_length =</span> <span class="dv">1</span>,</span>
<span id="cb49-12"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb49-12" aria-hidden="true" tabindex="-1"></a>                    <span class="at">state_length =</span> <span class="dv">2</span>)</span>
<span id="cb49-13"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb49-13" aria-hidden="true" tabindex="-1"></a>anim</span></code></pre></div>
<p><img src="Valorisation-des-donn%C3%A9es_files/figure-html/gganim_2,-1.gif" /><!-- --></p>
<p><strong><em>Transition_states()</em></strong> peut s’assimiler à la création de facettes, mais qui vont être ensuite utilisées pour créer une animation. Les options permettant de paramétrer cette animation:</p>
<ul>
<li>states: le nom de la colonne qui va définir nos états</li>
<li>transition_length : la durée relative de la transition</li>
<li>state_length : la durée relative de la pause entre les transitions</li>
<li>wrap : booléen qui défini si l’animation tourne en boucle ou non.</li>
</ul>
<p>La variable <em>closest_state</em> nous permet d’utiliser ici l’état pour l’afficher en sous-titre.</p>
<p>gganimate possède encore bien d’autres fonctionnalités pour définir son animation, notamment :</p>
<ul>
<li><p><strong><em>ease_aes()</em></strong> permet de définir comment le graphique change entre deux états : progression linaire, progression qui accélère entre le début et la fin…</p></li>
<li><p><strong><em>enter_xx()</em></strong> et <strong><em>exit_xx()</em></strong> permette de définir comment les objets apparaissent et disparaissent quand on change d’état.</p></li>
</ul>
<p>On peut utiliser gganimate avec des facettes.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb50-1" aria-hidden="true" tabindex="-1"></a>anim_facet <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> ODD_graphique_anime) <span class="sc">+</span> </span>
<span id="cb50-2"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">log</span>(Gross_Domestic_Product_GDP),</span>
<span id="cb50-3"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb50-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">y=</span><span class="fu">log</span>(Maternal_mortality_ratio),</span>
<span id="cb50-4"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb50-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">color=</span>Continent)) <span class="sc">+</span></span>
<span id="cb50-5"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb50-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Mortalité maternelle en fonction du PIB par habitant&quot;</span>,</span>
<span id="cb50-6"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb50-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span><span class="st">&quot;En {closest_state}&quot;</span>,</span>
<span id="cb50-7"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb50-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;PIB&quot;</span>,</span>
<span id="cb50-8"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb50-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;Taux de mortalité de la mère </span><span class="sc">\n</span><span class="st">(pour 100 000 naissances)&quot;</span>,</span>
<span id="cb50-9"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb50-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption=</span><span class="st">&quot;Source : ODD / ONU</span><span class="sc">\n</span><span class="st"> échelle logarithmique&quot;</span>)<span class="sc">+</span></span>
<span id="cb50-10"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb50-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>Continent) <span class="sc">+</span></span>
<span id="cb50-11"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb50-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transition_states</span>(<span class="at">states=</span>Year,</span>
<span id="cb50-12"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb50-12" aria-hidden="true" tabindex="-1"></a>                    <span class="at">transition_length =</span> <span class="dv">1</span>,</span>
<span id="cb50-13"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb50-13" aria-hidden="true" tabindex="-1"></a>                    <span class="at">state_length =</span> <span class="dv">2</span>)</span>
<span id="cb50-14"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb50-14" aria-hidden="true" tabindex="-1"></a>anim_facet</span></code></pre></div>
<p><img src="Valorisation-des-donn%C3%A9es_files/figure-html/gganim_3-1.gif" /><!-- --></p>
</div>
<div id="paramétrer-lanimation" class="section level2" number="14.2">
<h2><span class="header-section-number">14.2</span> Paramétrer l’animation</h2>
<p>La fonction <code>animate()</code> permet de paramétrer notre animation. Notamment:
- le moteur de rendu
- le nombre de frames à créer
- le frame rate
- la durée</p>
<p>Ici par exemple, nous paramétrons le rendu pour supprimer la boucle d’animation (<em>loop=FALSE</em>)</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">animate</span>(anim,<span class="at">renderer=</span><span class="fu">gifski_renderer</span>(<span class="at">file =</span> <span class="fu">tempfile</span>(<span class="at">fileext =</span> <span class="st">&quot;.gif&quot;</span>), </span>
<span id="cb51-2"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb51-2" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">loop =</span> <span class="cn">FALSE</span>,</span>
<span id="cb51-3"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb51-3" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">width =</span> <span class="cn">NULL</span>,</span>
<span id="cb51-4"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb51-4" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">height =</span> <span class="cn">NULL</span>)</span>
<span id="cb51-5"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb51-5" aria-hidden="true" tabindex="-1"></a>        )</span></code></pre></div>
<p><img src="Valorisation-des-donn%C3%A9es_files/figure-html/gganim_4-1.gif" /><!-- --></p>
</div>
<div id="exporter-une-animation" class="section level2" number="14.3">
<h2><span class="header-section-number">14.3</span> Exporter une animation</h2>
<p>La fonction <strong><em>anime_save()</em></strong> permet de sauvegarder nos animations sous différent format à définir via le moteur de rendu.
Par défaut, elle sauvegarde la dernière animation.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="animer-ses-graphiques-ggplot-avec-gganimate.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">anim_save</span>(<span class="st">&quot;figures/ma_super_animation.gif&quot;</span>)</span></code></pre></div>
</div>
<div id="exercice-6" class="section level2" number="14.4">
<h2><span class="header-section-number">14.4</span> Exercice 6</h2>
<p>A partir du fichier <code>rpls_aggrege_large.RData</code>, réaliser un graphique en barre représentant la répartition des DPE par classe (en %).<br />
Le graphique sera animé par département, uniquement pour ceux de la région Centre-Val de Loire.</p>
<p>Le résultat attendu :</p>
<p><img src="Valorisation-des-donn%C3%A9es_files/figure-html/gganim_6-1.gif" /><!-- --></p>

</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="créer-des-cartes-avec-ggplot2.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="créer-des-graphiques-et-cartes-pour-le-web.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
